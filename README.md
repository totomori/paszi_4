# MVP: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç (MVP), —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑:

- **Frontend**: React + Vite + TypeScript  
- **Backend**: FastAPI (Python)  
- **Database**: PostgreSQL  
- **ORM**: SQLAlchemy  
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Alembic  
- **–•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**: Argon2id  
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker + Docker Compose  
- **–¢–µ—Å—Ç—ã**: Pytest  

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π:

```
docker compose up --build
```

---

# –û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞ –≥–∏—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã, –∫ –ø—Ä–∏–º–µ—Ä—É, .env)

```
project/
‚îÇ   docker-compose.yml
‚îÇ   README.md
‚îÇ   .env
‚îÇ   .env.example
‚îÇ
‚îú‚îÄ‚îÄ‚îÄbackend
‚îÇ   ‚îÇ   Dockerfile
‚îÇ   ‚îÇ   start.sh
‚îÇ   ‚îÇ   requirements.txt
‚îÇ   ‚îÇ   alembic.ini
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄalembic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄversions
‚îÇ   ‚îÇ   ‚îÇ       20250101_create_users_table.py
‚îÇ   ‚îÇ   env.py
‚îÇ   ‚îÇ   script.py.mako
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄapp
‚îÇ   ‚îÇ   ‚îÇ   main.py
‚îÇ   ‚îÇ   ‚îÇ   config.py
‚îÇ   ‚îÇ   ‚îÇ   database.py
‚îÇ   ‚îÇ   ‚îÇ   logging_conf.py
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄmodels
‚îÇ   ‚îÇ   ‚îÇ       user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄroutes
‚îÇ   ‚îÇ   ‚îÇ       register.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄschemas
‚îÇ   ‚îÇ   ‚îÇ       user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄsecurity
‚îÇ   ‚îÇ   ‚îÇ       hashing.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄservices
‚îÇ   ‚îÇ   ‚îÇ       user_service.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄtests
‚îÇ   ‚îÇ           test_register_success.py
‚îÇ   ‚îÇ           test_register_duplicate.py
‚îÇ   ‚îÇ           test_register_weak_password.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄtests
‚îÇ           test_register.py
‚îÇ
‚îî‚îÄ‚îÄ‚îÄfrontend
    ‚îÇ   Dockerfile
    ‚îÇ   index.html
    ‚îÇ   package.json
    ‚îÇ   tsconfig.json
    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄsrc
        ‚îÇ   api.ts
        ‚îÇ   App.tsx
        ‚îÇ   main.tsx
        ‚îÇ
        ‚îú‚îÄ‚îÄ‚îÄpages
        ‚îÇ       Register.tsx
        ‚îî‚îÄ‚îÄ‚îÄstyles
                register.css
```

---

# –®–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞

## 1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

```
git clone https://github.com/totomori/paszi_4
cd paszi_4
```

## 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –≤ –Ω–µ–≥–æ –ø–∏—Å–∞—Ç—å:

–ò –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:


POSTGRES_USER
POSTGRES_PASSWORD
POSTGRES_DB
DATABASE_URL=postgresql://postgres:postgres@db:5432/app


## 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Compose

–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–æ–∫–µ—Ä–∞:

```
docker compose down -v
docker compose up --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—á–∫–∏:  
- –¥–ª—è backend ‚Üí http://localhost:8000  
- –¥–ª—è frontend ‚Üí http://localhost:5173  

---

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å MVP –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã –Ω–∞:
- —É—Å–ø–µ—à–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- –¥—É–±–ª–∏—Ä—É—é—â–∏–π –ª–æ–≥–∏–Ω (409 Conflict)  
- —Å–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å (422 Validation Error)

–î–ª—è –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Ç—Ä–∞–±–æ—Ç–Ω–∏ –Ω–∞–¥–æ –æ—á–∏—Å—Ç–∏—Ç—å –±–∞–∑—É –ø—Ä–µ–∂–¥–µ —á–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –∂–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å 1 —Ä–∞–∑. –ò–Ω–∞—á–µ 1 —Ç–µ—Å—Ç (–Ω–∞ —É—Å–ø–µ—à–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é) –±—É–¥–µ—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω –≤ —Å–≤—è–∑–∏ —Å —É–∂–µ –Ω–∞–ª–∏—á–∏–µ–º –¥–∞–Ω–Ω–æ–≥–æ –ø–æ —Ç–µ—Å—Ç—É –ª–æ–≥–∏–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ (–Ω–∞–¥–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏):

```
docker compose exec backend pytest
```

---

# API

## POST `/api/register`

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

```json
{
  "login": "–ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–ª—è",
  "password": "—Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å!"
}
```
*–º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–∞–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª, —Ç–∞–∫ –∏ –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

#### 200 OK

```json
{"message": "user —Å–æ–∑–¥–∞–Ω"}
```

#### 409 Conflict

```json
{"detail": "–ª–æ–≥–∏–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"}
```

#### 422 Validation Error  

(–í –Ω–µ–º –±—É–¥–µ—Ç –ª—é–±–∞—è –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)

---

# CURL-–ø—Ä–∏–º–µ—Ä—ã

### –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```
curl -X POST http://localhost:8000/api/register \
  -H "Content-Type: application/json" \
  -d '{"login":"user123","password":"StrongPass1!"}'
```

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ª–æ–≥–∏–Ω–∞
```
curl -X POST http://localhost:8000/api/register \
  -H "Content-Type: application/json" \
  -d '{"login":"user123","password":"StrongPass1!"}'
```

### –û—à–∏–±–∫–∞ —Å–ª–∞–±–æ–≥–æ –ø–∞—Ä–æ–ª—è
```
curl -X POST http://localhost:8000/api/register \
  -H "Content-Type: application/json" \
  -d '{"login":"weak","password":"123"}'
```

---

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ


1. –ù–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—ã—Ä–æ–π –ø–∞—Ä–æ–ª—å

–ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `password_hash` (—Å—Ç—Ä–æ–∫–∞ Argon2id).

2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Argon2id –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `ARGON2_TIME_COST`
- `ARGON2_MEMORY_COST`
- `ARGON2_PARALLELISM`
- `ARGON2_HASH_LEN`
- `ARGON2_SALT_LEN`

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ `.env`.

3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω (unique constraint)

–í –ë–î –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

```
op.create_unique_constraint("uq_users_login", "users", ["login"])
```

4. –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è "—Ö–æ—Ä–æ—à–µ–≥–æ" –ø–∞—Ä–æ–ª—è

- –¥–ª–∏–Ω–∞ –ª–æ–≥–∏–Ω–∞  > 8
- –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã  
- –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è (–∑–∞–≥–ª–∞–≤–Ω—ã–µ, –º–∞–ª–µ–Ω—å–∫–∏–µ, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã)

5. –ü–∞—Ä–æ–ª—å –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–Ω.

6. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- SECRET_KEY –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ .env  
- –ø–∞—Ä–æ–ª—å –ë–î –≤—ã–Ω–µ—Å–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
- –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü  

---

# –í–µ—Ç–∫–∏ Git

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–µ—Ç–∫–∏:

```
main                ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è
frontend            ‚Äî –∫–æ–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
backend             ‚Äî backend + tests + migrations
database            ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ alembic, —Å—Ö–µ–º–∞ –ë–î
```

---

# –ö–æ–º–∞–Ω–¥—ã Git –¥–ª—è –∑–∞–ª–∏–≤–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

(–¢—ã –≤—ã–ø–æ–ª–Ω—è–µ—à—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)

```
git init
git remote add origin https://github.com/totomori/paszi_4

# –°–æ–∑–¥–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Ç–∫—É backend
git checkout -b backend
git add .
git commit -m "backend: initial version with FastAPI, DB, migrations, tests"
git push -u origin backend

# –°–æ–∑–¥–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Ç–∫—É frontend
git checkout -b frontend
git add frontend/
git commit -m "frontend: React + Vite registration page"
git push -u origin frontend

# –°–æ–∑–¥–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Ç–∫—É database
git checkout -b database
git add backend/alembic*
git commit -m "database: alembic migrations"
git push -u origin database

# –°–æ–∑–¥–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å main
git checkout -b main
git merge backend --no-edit
git merge frontend --no-edit
git merge database --no-edit
git push -u origin main
```

---

# üì∏ –ß—Ç–æ –µ—â—ë –Ω–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ –∑–∞–¥–∞–Ω–∏—é

- –°–¥–µ–ª–∞—Ç—å **—Å–∫—Ä–∏–Ω—à–æ—Ç—ã GitHub**, –≥–¥–µ –≤–∏–¥–Ω—ã –≤–µ—Ç–∫–∏:  
  - main  
  - backend  
  - frontend  
  - database  

- –ú–æ–∂–Ω–æ –ø—Ä–∏–ª–æ–∂–∏—Ç—å –≤ –æ—Ç—á—ë—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
